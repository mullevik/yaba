(function(){"use strict";var e={4777:function(e,t,n){var o=n(9242),a=n(3396);function l(e,t,n,o,l,s){const i=(0,a.up)("NavigationComponent"),r=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(i),(0,a.Wm)(r)],64)}function s(e,t,n,o,l,s){const i=(0,a.up)("font-awesome-icon"),r=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("nav",null,[(0,a.Wm)(r,{to:{name:"home"}},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{icon:"fa-solid fa-table-list"})])),_:1}),(0,a.Wm)(r,{to:{name:"monthly"}},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{icon:"fa-solid fa-chart-bar"})])),_:1}),(0,a._)("a",null,[(0,a.Wm)(i,{icon:"fa-solid fa-chart-line"})]),(0,a.Wm)(r,{to:{name:"settings"}},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{icon:"fa-solid fa-gear"})])),_:1})])}var i={name:"NavigationComponent"},r=n(89);const c=(0,r.Z)(i,[["render",s],["__scopeId","data-v-2a4c2f52"]]);var u=c,m={name:"App",components:{NavigationComponent:u}};const d=(0,r.Z)(m,[["render",l]]);var p=d,h=n(5431);(0,h.z)("/yaba/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var g=n(3494),f=n(7749),b=n(8539),y=n(2483),v=n(7139);const L=e=>((0,a.dD)("data-v-65b51766"),e=e(),(0,a.Cn)(),e),w={key:0,style:{position:"relative",top:"2em"}},_=["onClick"],D={class:"labels"},S={class:"date"},E={class:"amount"},N=L((()=>(0,a._)("div",{style:{height:"7.5em"}},null,-1))),A={class:"buttons"};function k(e,t,n,l,s,i){const r=(0,a.up)("LabelComponent"),c=(0,a.up)("PendingLogs"),u=(0,a.up)("font-awesome-icon"),m=(0,a.up)("SubmitBudgetLogComponent");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.wy)((0,a._)("div",null,[(0,a._)("section",null,[s.pastLogs.length<1?((0,a.wg)(),(0,a.iD)("span",w,[(0,a.Uk)("No past submissions... "),(0,a._)("i",null,[(0,a._)("a",{href:"#",onClick:t[0]||(t[0]=(...e)=>i.onNewSubmit&&i.onNewSubmit(...e))},"add new expense")])])):((0,a.wg)(!0),(0,a.iD)(a.HY,{key:1},(0,a.Ko)(s.pastLogs,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"budget-log-item",key:t,onClick:e=>i.selectPastLog(t)},[(0,a._)("div",D,[(0,a._)("span",S,(0,v.zw)(e.pending?"pending":new Date(1e3*e.unixTimestamp).toLocaleDateString()),1),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.labels,((e,t)=>((0,a.wg)(),(0,a.j4)(r,{name:e,color:i.getLabelColor(e),key:t,clickable:!0,miniature:!0},null,8,["name","color"])))),128))]),(0,a._)("span",E,(0,v.zw)(e.amount)+" "+(0,v.zw)(e.currency.toUpperCase()),1)],8,_)))),128)),N]),(0,a._)("section",A,[(0,a.Wm)(c),(0,a._)("button",{class:"primary",onClick:t[1]||(t[1]=(...e)=>i.onNewSubmit&&i.onNewSubmit(...e))},[(0,a.Wm)(u,{icon:"fa-solid fa-circle-plus"}),(0,a.Uk)(" New expense ")])])],512),[[o.F8,!s.formOpen_]]),s.formOpen_?((0,a.wg)(),(0,a.j4)(m,{key:0,"past-log":s.selectedPastLog,onOnSubmitDone:i.onSubmitDone},null,8,["past-log","onOnSubmitDone"])):(0,a.kq)("",!0)],64)}const O={GREEN:"#78ca68ff",RED:"#ca6870ff",BLUE:"#6889caff",CYAN:"#68cac7ff",YELLOW:"#c6ca68ff",PINK:"#ca68b4ff",BROWN:"#ca9368ff",MAGENTA:"#9468caff",GRAY:"#cacacaff"},C=[{name:"groceries",color:O.MAGENTA},{name:"fuel",color:O.BROWN},{name:"rent",color:O.BLUE},{name:"restaurant",color:O.RED},{name:"food",color:O.YELLOW},{name:"alcohol",color:O.MAGENTA},{name:"entertainment",color:O.PINK},{name:"sport",color:O.GREEN},{name:"drugstore",color:O.BLUE},{name:"accommodation",color:O.BLUE},{name:"pharmacy",color:O.GREEN},{name:"public-transport",color:O.BROWN},{name:"subscription",color:O.CYAN},{name:"traveling",color:O.MAGENTA},{name:"clothes",color:O.PINK},{name:"music",color:O.PINK},{name:"home",color:O.BLUE},{name:"fast-food",color:O.RED},{name:"patisserie",color:O.PINK},{name:"video-games",color:O.MAGENTA},{name:"technology",color:O.CYAN},{name:"outdoor",color:O.BROWN},{name:"new",color:O.GREEN},{name:"barber",color:O.BROWN},{name:"optic",color:O.GREEN},{name:"health",color:O.RED},{name:"gift",color:O.MAGENTA}];function x(e,t,n,o,l,s){return(0,a.wg)(),(0,a.iD)("span",{style:(0,v.j5)(s.cssVars)},[(0,a.Uk)((0,v.zw)(n.name)+" ",1),n.removable?((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:t[0]||(t[0]=t=>e.$emit("onRemove"))},"X")):(0,a.kq)("",!0)],4)}const P=O.GRAY;var T={name:"LabelComponent",props:{name:{required:!0,type:String},color:{default:P,type:String},removable:{default:!1,type:Boolean},clickable:{type:Boolean,default:!0},miniature:{type:Boolean,default:!1}},emits:["onRemove"],computed:{cssVars(){return{"--bg":this.color?this.color:P,"--right-padding":this.removable?"0.3em":"0.8em","--cursor":this.clickable?"pointer":"default","--font-size":this.miniature?"0.7em":"1em"}}}};const I=(0,r.Z)(T,[["render",x],["__scopeId","data-v-5c7c7db2"]]);var M=I;const B=e=>((0,a.dD)("data-v-849ad58a"),e=e(),(0,a.Cn)(),e),Y={class:"amount-section"},G=B((()=>(0,a._)("option",{value:"CZK",selected:""},"CZK",-1))),U=B((()=>(0,a._)("option",{value:"EUR"},"EUR",-1))),W=[G,U],R=["disabled"],V={key:0},j={key:1};function F(e,t,n,l,s,i){const r=(0,a.up)("SelectedLabelsComponent"),c=(0,a.up)("AvailableLabelsComponent"),u=(0,a.up)("font-awesome-icon");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(r,{modelValue:s.selectedLabels,"onUpdate:modelValue":t[0]||(t[0]=e=>s.selectedLabels=e),class:"selected-labels-section",style:(0,v.j5)(i.cssVars)},null,8,["modelValue","style"]),(0,a.Wm)(c,{modelValue:s.availableLabels,"onUpdate:modelValue":t[1]||(t[1]=e=>s.availableLabels=e),onOnLabelSelected:this.selectLabel,class:"available-labels-section",style:(0,v.j5)(i.cssVars)},null,8,["modelValue","onOnLabelSelected","style"]),(0,a._)("div",Y,[(0,a.wy)((0,a._)("input",{ref:"inputAmount",type:"number",name:"amount",id:"input-amount","onUpdate:modelValue":t[2]||(t[2]=e=>s.amount=e),placeholder:"0"},null,512),[[o.nr,s.amount]]),(0,a.wy)((0,a._)("select",{name:"currency",id:"input-currency",form:"main-form","onUpdate:modelValue":t[3]||(t[3]=e=>s.currency=e)},W,512),[[o.bM,s.currency]]),(0,a._)("button",{style:(0,v.j5)(i.cssVars),disabled:!s.ableToSubmit,onClick:t[4]||(t[4]=(...e)=>i.submitAmount&&i.submitAmount(...e)),class:"primary"},[s.pendingSubmit?((0,a.wg)(),(0,a.iD)("span",V,[(0,a.Wm)(u,{icon:"fa-solid fa-spinner",spin:""})])):((0,a.wg)(),(0,a.iD)("span",j,[(0,a.Wm)(u,{icon:"fa-solid fa-paper-plane"}),(0,a.Uk)(" Submit")]))],12,R)]),(0,a._)("div",{class:"under-amount-section-filler",style:(0,v.j5)(i.cssVars)},null,4)],64)}n(7658);function $(e,t,n){return{unixTimestamp:Math.floor((new Date).getTime()/1e3),amount:e,currency:t,labels:n}}n(541);var K=n(1373);const Z=(0,K.Z)(),z={NEW_BUDGET_LOG_STORED:"NEW_BUDGET_LOG_STORED"};function H(){Z.emit(z.NEW_BUDGET_LOG_STORED)}function q(e){Z.on(z.NEW_BUDGET_LOG_STORED,e)}var J=n(4806),X=n.n(J);const Q={API_KEY:"API_KEY",API_ENDPOINT:"ENDPOINT",BUDGET_LOGS:"BUDGET_LOGS",PAST_LABELS:"PAST_LABELS"},ee=40,te=40;function ne(e){console.log(`LOCAL_STORAGE_UTILS ${e}`)}function oe(){return localStorage.getItem(Q.API_KEY)}function ae(e){ne(`Setting API KEY: ${e}`),localStorage.setItem(Q.API_KEY,e)}function le(){return localStorage.getItem(Q.API_ENDPOINT)}function se(e){return ne(`Setting API Endpoint: ${e}`),localStorage.setItem(Q.API_ENDPOINT,e)}function ie(){const e=localStorage.getItem(Q.BUDGET_LOGS);return null===e||""==e?[]:JSON.parse(e)}function re(){const e=localStorage.getItem(Q.PAST_LABELS);return null==e||""==e?[]:JSON.parse(e)}function ce(e){localStorage.setItem(Q.PAST_LABELS,JSON.stringify([...e,...re()].slice(0,te)))}function ue(){const e={};for(const[t,n]of re().entries())n in e?e[n]+=1/(t+1):e[n]=1/(t+1);return e}function me(e){const t=ie();t.unshift(e);const n=t.filter((e=>!e.pending));if(!e.pending&&n.length>=ee){let e=0;for(const[n,o]of t.entries())o.pending||(e=n);t.splice(e,1)}localStorage.setItem(Q.BUDGET_LOGS,JSON.stringify(t)),ce(e.labels),H()}function de(e){const t=ie(),n=t.findIndex((t=>X().isEqual(t,e)));return n<0?(ne(`BudgetLog ${e} not found in pending budget logs and thus can not be removed.`),t):(t.splice(n,1),localStorage.setItem(Q.BUDGET_LOGS,JSON.stringify(t)),H(),t)}function pe(e){console.log(`API ${e}`)}function he(e,t){return{api_key:t,unix_timestamp:e.unixTimestamp,amount:e.amount,currency:e.currency,labels:e.labels.join(", ")}}function ge(e){if(pe(`received response with status ${e.status}`),!e.ok){const t=new Error("Received non-2xx response from API");throw t.response=e,t}return e.json()}function fe(e){const t=le();null!==t&&""!=t||(pe("no endpoint"),Promise.reject(new Error("No API Endpoint set in client settings")));const n=oe();null!==n&&""!=n||(pe("no api key"),Promise.reject(new Error("No API_KEY set in client settings.")));const o=JSON.stringify(he(e,n));return pe(`sending ${o} to ${t}`),fetch(t,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},redirect:"follow",body:o}).then((e=>ge(e))).then((e=>{if(pe(`received response body ${JSON.stringify(e)}`),!("status"in e)||"ok"!=e["status"])throw new Error("status == ok not found in response body");return e}))}function be(e,t){const n=le();return null!==n&&""!=n||(pe("no endpoint"),Promise.reject(new Error("No API Endpoint set in client settings"))),pe(`sending request to ${n} with ?year=${e} ?month=${t}`),fetch(`${n}?`+new URLSearchParams({year:e,month:t})).then((e=>ge(e))).then((e=>(pe(`received response body ${JSON.stringify(e)}`),e)))}const ye=e=>((0,a.dD)("data-v-00a2ecdd"),e=e(),(0,a.Cn)(),e),ve=ye((()=>(0,a._)("div",null,[(0,a._)("h3",null,"Selected labels")],-1))),Le={class:"labels"};function we(e,t,n,o,l,s){const i=(0,a.up)("LabelComponent"),r=(0,a.up)("FreeTextLabelComponent");return(0,a.wg)(),(0,a.iD)("section",null,[ve,(0,a._)("div",Le,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.modelValue,((e,t)=>((0,a.wg)(),(0,a.j4)(i,{key:t,name:e.name,color:e.color,removable:!0,onOnRemove:e=>this.removeLabel(t)},null,8,["name","color","onOnRemove"])))),128)),(0,a.Wm)(r,{placeholder:s.placeholder,onOnLabelSubmit:this.addLabel},null,8,["placeholder","onOnLabelSubmit"])])])}const _e=["placeholder"];function De(e,t,n,l,s,i){return(0,a.wg)(),(0,a.iD)("span",null,[(0,a.wy)((0,a._)("input",{type:"text",placeholder:n.placeholder,"onUpdate:modelValue":t[0]||(t[0]=e=>s.text=e)},null,8,_e),[[o.nr,s.text]])])}var Se={name:"FreeTextLabelComponent",props:{placeholder:{default:"... or type a custom label",type:String}},emits:["onLabelSubmit"],data(){return{text:""}},watch:{text(e){e.trim().length>1&&e.endsWith(" ")&&(this.$emit("onLabelSubmit",e.trim()),this.text="")}}};const Ee=(0,r.Z)(Se,[["render",De],["__scopeId","data-v-936d1222"]]);var Ne=Ee,Ae={name:"SelectedLabelsComponent",components:{LabelComponent:M,FreeTextLabelComponent:Ne},props:["modelValue"],emits:["update:modelValue"],computed:{placeholder(){return this.modelValue.length>0?"... or type a custom label":"choose labels or start typing"}},methods:{removeLabel(e){this.$emit("update:modelValue",this.modelValue.filter(((t,n)=>n!=e)))},addLabel(e,t=null){const n=this.modelValue.map((e=>e));n.push({name:e,color:t}),this.$emit("update:modelValue",n)}}};const ke=(0,r.Z)(Ae,[["render",we],["__scopeId","data-v-00a2ecdd"]]);var Oe=ke;const Ce=e=>((0,a.dD)("data-v-6b9ab060"),e=e(),(0,a.Cn)(),e),xe=Ce((()=>(0,a._)("h3",null,"Available labels",-1))),Pe=["value"],Te={class:"labels"};function Ie(e,t,n,o,l,s){const i=(0,a.up)("LabelComponent");return(0,a.wg)(),(0,a.iD)("section",null,[(0,a._)("div",null,[xe,(0,a._)("input",{type:"text",placeholder:"search labels",value:l.searchText,onInput:t[0]||(t[0]=e=>l.searchText=e.target.value)},null,40,Pe)]),(0,a._)("div",Te,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.filteredLabels,((e,t)=>((0,a.wg)(),(0,a.j4)(i,{key:t,name:e.name,color:e.color,clickable:!0,onClick:t=>this.$emit("onLabelSelected",e.name)},null,8,["name","color","onClick"])))),128))])])}var Me={name:"AvailableLabels",components:{LabelComponent:M},props:["modelValue"],emits:["update:modelValue","onLabelSelected"],computed:{sortedLabels(){return[...this.modelValue].sort(((e,t)=>e.name.localeCompare(t.name))).sort(((e,t)=>{const n=e.name in this.labelScoreMap?this.labelScoreMap[e.name]:0,o=t.name in this.labelScoreMap?this.labelScoreMap[t.name]:0;return n<o?1:n>o?-1:0}))},filteredLabels(){return this.sortedLabels.filter((e=>e.name.toLowerCase().includes(this.searchText.toLocaleLowerCase())))}},data(){return{searchText:"",labelScoreMap:ue()}}};const Be=(0,r.Z)(Me,[["render",Ie],["__scopeId","data-v-6b9ab060"]]);var Ye=Be;function Ge(){return C}var Ue={name:"SubmitBudgetLogComponent",components:{SelectedLabelsComponent:Oe,AvailableLabelsComponent:Ye},props:{pastLog:{type:Object,default(){return{amount:null,currency:"czk",labels:[]}}}},emits:["onSubmitDone"],data(){return{amount:null,currency:"CZK",selectedLabels:[],availableLabels:Ge(),ableToSubmit:!1,pendingSubmit:!1}},mounted(){this.$refs.inputAmount.focus(),this.currency=this.pastLog.currency.toUpperCase();const e=[],t=this.availableLabels.map((e=>e.name));for(const n of this.pastLog.labels){const o=t.indexOf(n);o>=0?e.push({name:n,color:this.availableLabels[o].color}):e.push({name:n,color:null})}this.selectedLabels=e},computed:{cssVars(){return{"--selected-labels-section-height":"5em","--amount-section-height":"20em"}}},watch:{amount:function(e){this.ableToSubmit=null!==e&&0!==e&&""!==e}},methods:{clearData(){this.amount=null,this.selectedLabels=[]},selectLabel(e){const t=this.selectedLabels.map((e=>e)),n=this.availableLabels.filter((t=>t.name===e));1!==n.length&&console.warn(`Label with name ${e} not found in available labels.`),t.push(n[0]),this.selectedLabels=t},submitAmount(){this.ableToSubmit=!1,this.pendingSubmit=!0;const e=$(this.amount,this.currency,this.selectedLabels.map((e=>e.name)));fe(e).then((()=>{e.pending=!1})).catch((t=>{console.error("Budget log could not have been sent"),console.error(t),e.pending=!0,this.pendingSubmit=!1})).finally((()=>{this.clearData(),me(e),this.ableToSubmit=!0,this.pendingSubmit=!1,this.$emit("onSubmitDone",e)}))}}};const We=(0,r.Z)(Ue,[["render",F],["__scopeId","data-v-849ad58a"]]);var Re=We;const Ve=["disabled"],je={key:0},Fe={key:1},$e={key:0};function Ke(e,t,n,l,s,i){const r=(0,a.up)("font-awesome-icon");return(0,a.wy)(((0,a.wg)(),(0,a.iD)("button",{onClick:t[0]||(t[0]=e=>i.manualSync()),disabled:!i.hasPendingLogs},[s.syncing_?((0,a.wg)(),(0,a.iD)("span",je,[(0,a.Wm)(r,{icon:"fa-solid fa-spinner",spin:""})])):((0,a.wg)(),(0,a.iD)("span",Fe,[(0,a.Wm)(r,{icon:"fa-solid fa-repeat"}),(0,a.Uk)(),s.pendingLogs.length>0?((0,a.wg)(),(0,a.iD)("span",$e,(0,v.zw)(s.pendingLogs.length),1)):(0,a.kq)("",!0)]))],8,Ve)),[[o.F8,i.hasPendingLogs]])}var Ze={name:"PendingLogs",components:{},data(){return{pendingLogs:ie().filter((e=>e.pending)),syncing_:!1}},computed:{hasPendingLogs(){return this.pendingLogs.length>0&&!this.syncing_}},mounted(){q((()=>{this.pendingLogs=ie().filter((e=>e.pending))}))},methods:{_recursiveSync(e,t){if(e>=t.length)return void(this.syncing_=!1);const n=t.at(e);fe(n).then((o=>{this.removePendingLog(n),this._recursiveSync(e+1,t)})).catch((e=>{console.error(`Can not sync pending log ${JSON.stringify(n)}`),console.error(`${e}`),this.syncing_=!1}))},manualSync(){const e=[...this.pendingLogs];e.length<1||(this.syncing_=!0,this._recursiveSync(0,e))},removePendingLog(e){de(e)}}};const ze=(0,r.Z)(Ze,[["render",Ke]]);var He=ze;function qe(){return C}const Je={amount:null,currency:"czk",labels:[]};var Xe={name:"BudgetLogsComponent",components:{LabelComponent:M,SubmitBudgetLogComponent:Re,PendingLogs:He},data(){return{pastLogs:ie(),availableLabels:qe(),formOpen_:!1,selectedPastLog:Je,showSettings_:!1}},mounted(){q((()=>{this.pastLogs=ie()}))},methods:{getLabelColor(e){const t=this.availableLabels.filter((t=>t.name===e));return t.length<1?null:t[0].color},selectPastLog(e){this.selectedPastLog=this.pastLogs[e],this.formOpen_=!0},onNewSubmit(){this.selectedPastLog=Je,this.formOpen_=!0},onSubmitDone(){this.formOpen_=!1}}};const Qe=(0,r.Z)(Xe,[["render",k],["__scopeId","data-v-65b51766"]]);var et=Qe;const tt={class:"month-selection"},nt={id:"month-current",class:"month-selection-item"},ot=["disabled"],at={key:0,class:"info-note"},lt={key:1,class:"info-note"},st=(0,a._)("svg",{id:"monthly-labels"},null,-1),it=(0,a._)("div",{style:{height:"7.5em"}},null,-1);function rt(e,t,n,o,l,s){const i=(0,a.up)("font-awesome-icon");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",tt,[(0,a._)("button",{id:"month-prev",class:"month-selection-item",onClick:t[0]||(t[0]=(...e)=>s.selectPreviousMonth&&s.selectPreviousMonth(...e))},[(0,a.Wm)(i,{icon:"fa-solid fa-arrow-left"})]),(0,a._)("span",nt,(0,v.zw)(l.selectedDate.toLocaleDateString(s.getLocale(),{month:"long"}))+" "+(0,v.zw)(l.selectedDate.getFullYear()),1),(0,a._)("button",{id:"month-next",class:"month-selection-item",onClick:t[1]||(t[1]=(...e)=>s.selectNextMonth&&s.selectNextMonth(...e)),disabled:!s.hasNextMonth},[(0,a.Wm)(i,{icon:"fa-solid fa-arrow-right"})],8,ot)]),(0,a._)("div",null,[0!=l.monthlyData.length||l.isFetching?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",at,"No monthly data available")),l.isFetching?((0,a.wg)(),(0,a.iD)("div",lt,[(0,a.Wm)(i,{icon:"fa-solid fa-spinner",spin:""}),(0,a.Uk)(" obtaining data for "+(0,v.zw)(l.selectedDate.toLocaleDateString(s.getLocale(),{month:"long"}))+" "+(0,v.zw)(l.selectedDate.getFullYear()),1)])):(0,a.kq)("",!0),st]),it],64)}var ct=n(8117);const ut={};for(const Mt of C)ut[Mt.name.toLowerCase()]=Mt.color;function mt(e){function t(e){return e.toLocaleLowerCase().replace(",","").trim()}const n={};for(const a of e["rows"]){const e=a[1],o=a[0];for(const a of e.split(" ")){const e=t(a);n[e]=e in n?n[e]+o:o}}const o=[];for(const[a,l]of Object.entries(n))o.push({label:a,amount:l,color:a in ut?ut[a]:O.GRAY});return o.sort(((e,t)=>e["amount"]>t["amount"]?1:e["amount"]<t["amount"]?-1:0))}var dt={name:"MonthlyComponent",mounted(){this.fetchMonthlyData()},data(){return{currentDate:new Date,selectedDate:new Date,monthlyData:[],isFetching:!1}},computed:{hasNextMonth(){return this.selectedDate.getMonth()<this.currentDate.getMonth()&&this.selectedDate.getFullYear()<=this.currentDate.getFullYear()}},watch:{selectedDate(e,t){this.fetchMonthlyData()},monthlyData(e,t){this.renderData(e)}},methods:{getLocale(){return void 0!=navigator.languages?navigator.languages[0]:navigator.language},selectPreviousMonth(){const e=new Date(this.selectedDate.getTime());0!=e.getMonth()?e.setMonth(this.selectedDate.getMonth()-1):(e.setMonth(11),e.setFullYear(this.selectedDate.getFullYear()-1)),this.selectedDate=e},selectNextMonth(){const e=new Date(this.selectedDate.getTime());11!=e.getMonth()?e.setMonth(this.selectedDate.getMonth()+1):(e.setMonth(0),e.setFullYear(this.selectedDate.getFullYear()+1)),this.selectedDate=e},fetchMonthlyData(){this.destroyData(),this.isFetching=!0,be(this.selectedDate.getFullYear(),this.selectedDate.getMonth()).then((e=>{this.monthlyData=mt(e)})).catch((()=>{this.monthlyData=[]})).finally((()=>{this.isFetching=!1}))},destroyData(){const e=ct.Ys("#monthly-labels");e.selectAll("*").remove()},renderData(e){const t=1e3,n=t/5,o=50*e.length,a=ct.Ys("#monthly-labels").attr("viewBox",`0 0 ${t} ${o}`),l=ct.Fp7(e,(e=>e.amount)),s=ct.tiA().range([o,0]).padding(.1),i=ct.BYU().range([n+1,t]);s.domain(e.map((e=>e.label))),i.domain([0,l]),a.selectAll("rect").data(e).join("rect").attr("class","data-bar").attr("fill",(e=>e.color)).attr("x",i(0)).attr("y",(e=>s(e.label))).attr("height",s.bandwidth()).attr("width",(e=>i(e.amount)-i(0))),a.append("g").selectAll("rect").data(e).join("rect").attr("class","under-label-bar").attr("fill",(e=>e.color)).attr("x",0).attr("y",(e=>s(e.label))).attr("height",s.bandwidth()).attr("width",n),a.append("g").attr("class","label-text").attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","1em").selectAll("text").data(e).join("text").attr("x",0).attr("y",(e=>s(e.label)+s.bandwidth()/2)).attr("dx","0.5em").attr("dy","0.25em").text((e=>e.label)),a.append("g").attr("class","amount-text").attr("font-family","sans-serif").attr("font-size","1em").selectAll("text").attr("text-anchor","start").data(e).join("text").attr("x",(e=>i(e.amount))).attr("y",(e=>s(e.label)+s.bandwidth()/2)).attr("dx","0.5em").attr("dy","0.25em").text((e=>e.amount)).call((e=>e.filter((e=>e.amount>.6*l)).attr("text-anchor","end").attr("x",(e=>i(e.amount))).attr("y",(e=>s(e.label)+s.bandwidth()/2)).attr("dx","-0.5em").attr("dy","0.25em").attr("fill","var(--cp-text-dark)")))}}};const pt=(0,r.Z)(dt,[["render",rt]]);var ht=pt;const gt=(0,a._)("h2",null,"App settings",-1),ft={class:"form"},bt={id:"settings-form"},yt=(0,a._)("label",{for:"api-endpoint"},"API Endpoint",-1),vt=(0,a._)("br",null,null,-1),Lt=(0,a._)("br",null,null,-1),wt=(0,a._)("label",{for:"api-key"},"API Key",-1),_t=(0,a._)("br",null,null,-1),Dt=(0,a._)("br",null,null,-1);function St(e,t,n,l,s,i){return(0,a.wg)(),(0,a.iD)(a.HY,null,[gt,(0,a._)("div",ft,[(0,a._)("form",bt,[yt,vt,(0,a.wy)((0,a._)("input",{type:"input",name:"api-endpoint",id:"api-endpoint","onUpdate:modelValue":t[0]||(t[0]=e=>s.apiEndpoint=e)},null,512),[[o.nr,s.apiEndpoint]]),Lt,wt,_t,(0,a.wy)((0,a._)("input",{type:"input",name:"api-key",id:"api-key","onUpdate:modelValue":t[1]||(t[1]=e=>s.apiKey=e)},null,512),[[o.nr,s.apiKey]]),Dt])])],64)}var Et={name:"SettingsFormComponent",components:{},data(){return{apiEndpoint:le(),apiKey:oe()}},watch:{apiEndpoint:X().debounce((function(e){se(e)}),400),apiKey:X().debounce((function(e){ae(e)}),400)}};const Nt=(0,r.Z)(Et,[["render",St]]);var At=Nt;const kt={style:{position:"relative",top:"2em"}};function Ot(e,t,n,o,l,s){return(0,a.wg)(),(0,a.iD)("span",kt,"So far, there is nothing here. Maybe there will be something in the future.")}var Ct={name:"NotFoundComponent"};const xt=(0,r.Z)(Ct,[["render",Ot]]);var Pt=xt;g.vI.add(b.gr5,b.EQ8,b.jHE,b.XCy,b.LM3,b.u7T,b.koM,b.Stf,b.eFW,b.acZ);const Tt=[{path:"/",component:et,name:"home"},{path:"/monthly",component:ht,name:"monthly"},{path:"/settings",component:At,name:"settings"},{path:"/:catchAll(.*)",component:Pt,name:"404"}],It=(0,y.p7)({history:(0,y.r5)("/yaba/"),routes:Tt});(0,o.ri)(p).use(It).component("font-awesome-icon",f.GN).mount("#app")}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var l=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(l.exports,l,l.exports,n),l.loaded=!0,l.exports}n.m=e,function(){var e=[];n.O=function(t,o,a,l){if(!o){var s=1/0;for(u=0;u<e.length;u++){o=e[u][0],a=e[u][1],l=e[u][2];for(var i=!0,r=0;r<o.length;r++)(!1&l||s>=l)&&Object.keys(n.O).every((function(e){return n.O[e](o[r])}))?o.splice(r--,1):(i=!1,l<s&&(s=l));if(i){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[o,a,l]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,l,s=o[0],i=o[1],r=o[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(a in i)n.o(i,a)&&(n.m[a]=i[a]);if(r)var u=r(n)}for(t&&t(o);c<s.length;c++)l=s[c],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(u)},o=self["webpackChunkyaba"]=self["webpackChunkyaba"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(4777)}));o=n.O(o)})();
//# sourceMappingURL=app.3dbe3890.js.map